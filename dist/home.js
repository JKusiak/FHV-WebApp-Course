(()=>{"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let t=new class{constructor(){e(this,"value",0),e(this,"observers",void 0),this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter((t=>t!==e))}notify(e){this.observers.forEach((t=>t(e)))}},s=JSON.parse(localStorage.getItem("allmessages")||"[]");!function(){const e=document.createElement("div");e.className="header",e.textContent="Messenger VeryLight",document.body.appendChild(e)}(),function(){const e=document.createElement("div");e.className="topnav";const t=document.createElement("a");t.className="allmessages",t.href="home.html",t.textContent="Messages";const s=document.createElement("a");s.className="newmessage",s.href="newmessage.html",s.textContent="Add new message",document.body.appendChild(e),e.appendChild(s),e.appendChild(t)}(),function(){const e=document.createElement("div");e.className="messageCounter",document.body.appendChild(e);const s=document.querySelector(".allmessages");t.subscribe((e=>{s.textContent=e>5?"Messages(5+)":e<5&&e>0?`Messages(${e})`:"Messages"})),t.subscribe((t=>{e.textContent=`You have ${t} unread messages`})),t.notify(t.value)}(),function(){if(s.length>0)for(let e in s){const n=document.createElement("div");n.className="messageDisplay",n.id=`${e}`;const o=document.createElement("p");o.textContent=s[e].messageTitle.toString();const a=document.createElement("p");a.textContent=s[e].messageBody.toString();const c=document.createElement("p");c.textContent=s[e].isRead.toString(),s[e].isRead?n.style.backgroundColor="#FFFFFF":(n.style.backgroundColor="#EAF3FA",t.value+=1,t.notify(t.value)),document.body.appendChild(n),n.appendChild(o),n.appendChild(a),n.appendChild(c)}else{const e=document.createElement("div");e.textContent="Nothing here yet",document.body.appendChild(e)}}(),document.querySelectorAll(".messageDisplay").forEach((e=>{e.addEventListener("click",(n=>{0==s[e.getAttribute("id")].isRead&&(e.style.backgroundColor="#FFFFFF",s[e.getAttribute("id")].isRead=!0,t.value-=1,t.notify(t.value),localStorage.setItem("allmessages",JSON.stringify(s)))}))}))})();